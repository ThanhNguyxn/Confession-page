<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/public/assets/css/style.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/assets/css/style.css" />
              <option name="updatedContent" value="/* ==========================================================================&#10;   Modern Anonymous Confessions Platform - Optimized CSS&#10;   ========================================================================== */&#10;&#10;/* CSS Variables */&#10;:root {&#10;    --primary-color: #6366f1;&#10;    --primary-dark: #4f46e5;&#10;    --primary-light: #818cf8;&#10;    --secondary-color: #ec4899;&#10;    --success-color: #10b981;&#10;    --warning-color: #f59e0b;&#10;    --danger-color: #ef4444;&#10;    --text-dark: #1f2937;&#10;    --text-light: #6b7280;&#10;    --text-lighter: #9ca3af;&#10;    --border-color: #e5e7eb;&#10;    --bg-light: #f9fafb;&#10;    --bg-white: #ffffff;&#10;    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);&#10;    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);&#10;    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);&#10;    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);&#10;    --radius-sm: 0.375rem;&#10;    --radius-md: 0.5rem;&#10;    --radius-lg: 0.75rem;&#10;    --radius-xl: 1rem;&#10;    --transition: all 0.3s ease;&#10;}&#10;&#10;/* Reset &amp; Base */&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;&#10;    color: var(--text-dark);&#10;    line-height: 1.6;&#10;    background-color: var(--bg-light);&#10;}&#10;&#10;html {&#10;    scroll-behavior: smooth;&#10;}&#10;&#10;.container {&#10;    max-width: 1200px;&#10;    margin: 0 auto;&#10;    padding: 0 1rem;&#10;}&#10;&#10;/* Header */&#10;.main-header {&#10;    background: var(--bg-white);&#10;    box-shadow: var(--shadow-sm);&#10;    position: sticky;&#10;    top: 0;&#10;    z-index: 1000;&#10;}&#10;&#10;.navbar {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: 1rem 0;&#10;}&#10;&#10;.logo {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.75rem;&#10;}&#10;&#10;.brand-name {&#10;    font-size: 1.25rem;&#10;    font-weight: 700;&#10;    color: var(--primary-color);&#10;}&#10;&#10;.nav-links {&#10;    display: flex;&#10;    gap: 2rem;&#10;}&#10;&#10;.nav-link {&#10;    text-decoration: none;&#10;    color: var(--text-dark);&#10;    font-weight: 500;&#10;    transition: var(--transition);&#10;    position: relative;&#10;}&#10;&#10;.nav-link:hover,&#10;.nav-link.active {&#10;    color: var(--primary-color);&#10;}&#10;&#10;.nav-link.active::after {&#10;    content: '';&#10;    position: absolute;&#10;    bottom: -0.5rem;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 2px;&#10;    background: var(--primary-color);&#10;}&#10;&#10;/* Hero Section */&#10;.hero-section {&#10;    padding: 4rem 0;&#10;    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;    color: white;&#10;}&#10;&#10;.hero-content {&#10;    display: grid;&#10;    grid-template-columns: 1fr 1fr;&#10;    gap: 3rem;&#10;    align-items: center;&#10;}&#10;&#10;.hero-title {&#10;    font-size: 3rem;&#10;    font-weight: 800;&#10;    margin-bottom: 1rem;&#10;    line-height: 1.2;&#10;}&#10;&#10;.hero-subtitle {&#10;    font-size: 1.25rem;&#10;    margin-bottom: 2rem;&#10;    opacity: 0.95;&#10;}&#10;&#10;.hero-features {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: 1.5rem;&#10;}&#10;&#10;.feature-item {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.5rem;&#10;    background: rgba(255, 255, 255, 0.15);&#10;    padding: 0.75rem 1.25rem;&#10;    border-radius: var(--radius-lg);&#10;    backdrop-filter: blur(10px);&#10;}&#10;&#10;.feature-icon {&#10;    font-size: 1.5rem;&#10;}&#10;&#10;/* Form Card */&#10;.form-card {&#10;    background: var(--bg-white);&#10;    padding: 2rem;&#10;    border-radius: var(--radius-xl);&#10;    box-shadow: var(--shadow-xl);&#10;}&#10;&#10;.form-title {&#10;    font-size: 1.75rem;&#10;    font-weight: 700;&#10;    margin-bottom: 1.5rem;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.form-group {&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.form-group label {&#10;    display: block;&#10;    margin-bottom: 0.5rem;&#10;    font-weight: 600;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.form-control {&#10;    width: 100%;&#10;    padding: 0.75rem 1rem;&#10;    border: 2px solid var(--border-color);&#10;    border-radius: var(--radius-md);&#10;    font-size: 1rem;&#10;    transition: var(--transition);&#10;    font-family: inherit;&#10;}&#10;&#10;.form-control:focus {&#10;    outline: none;&#10;    border-color: var(--primary-color);&#10;    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);&#10;}&#10;&#10;textarea.form-control {&#10;    resize: vertical;&#10;    min-height: 120px;&#10;}&#10;&#10;.char-count,&#10;.form-hint {&#10;    display: block;&#10;    margin-top: 0.5rem;&#10;    font-size: 0.875rem;&#10;    color: var(--text-lighter);&#10;}&#10;&#10;/* Buttons */&#10;.btn {&#10;    padding: 0.75rem 1.5rem;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    font-size: 1rem;&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: var(--transition);&#10;    text-decoration: none;&#10;    display: inline-block;&#10;    text-align: center;&#10;}&#10;&#10;.btn-primary {&#10;    background: var(--primary-color);&#10;    color: white;&#10;}&#10;&#10;.btn-primary:hover {&#10;    background: var(--primary-dark);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.btn-secondary {&#10;    background: var(--text-light);&#10;    color: white;&#10;}&#10;&#10;.btn-secondary:hover {&#10;    background: var(--text-dark);&#10;}&#10;&#10;.btn-outline {&#10;    background: transparent;&#10;    border: 2px solid var(--primary-color);&#10;    color: var(--primary-color);&#10;}&#10;&#10;.btn-outline:hover {&#10;    background: var(--primary-color);&#10;    color: white;&#10;}&#10;&#10;.btn-block {&#10;    width: 100%;&#10;}&#10;&#10;/* How It Works Section */&#10;.how-section {&#10;    padding: 5rem 0;&#10;    background: var(--bg-white);&#10;}&#10;&#10;.section-title {&#10;    text-align: center;&#10;    font-size: 2.5rem;&#10;    font-weight: 800;&#10;    margin-bottom: 3rem;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.steps-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: 2rem;&#10;}&#10;&#10;.step-card {&#10;    text-align: center;&#10;    padding: 2rem;&#10;    border-radius: var(--radius-xl);&#10;    background: var(--bg-light);&#10;    transition: var(--transition);&#10;    position: relative;&#10;}&#10;&#10;.step-card:hover {&#10;    transform: translateY(-5px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.step-number {&#10;    position: absolute;&#10;    top: 1rem;&#10;    right: 1rem;&#10;    width: 2.5rem;&#10;    height: 2.5rem;&#10;    background: var(--primary-color);&#10;    color: white;&#10;    border-radius: 50%;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    font-weight: 700;&#10;    font-size: 1.125rem;&#10;}&#10;&#10;.step-icon {&#10;    font-size: 3rem;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;.step-card h3 {&#10;    font-size: 1.25rem;&#10;    margin-bottom: 0.75rem;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.step-card p {&#10;    color: var(--text-light);&#10;}&#10;&#10;/* Stats Section */&#10;.stats-section {&#10;    padding: 4rem 0;&#10;    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;    color: white;&#10;}&#10;&#10;.stats-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: 2rem;&#10;}&#10;&#10;.stat-item {&#10;    text-align: center;&#10;}&#10;&#10;.stat-number {&#10;    font-size: 3rem;&#10;    font-weight: 800;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.stat-label {&#10;    font-size: 1.125rem;&#10;    opacity: 0.9;&#10;}&#10;&#10;/* Footer */&#10;.main-footer {&#10;    background: var(--text-dark);&#10;    color: white;&#10;    padding: 3rem 0 1.5rem;&#10;}&#10;&#10;.footer-content {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: 2rem;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.footer-section h4 {&#10;    margin-bottom: 1rem;&#10;    font-size: 1.125rem;&#10;}&#10;&#10;.footer-section a {&#10;    display: block;&#10;    color: rgba(255, 255, 255, 0.7);&#10;    text-decoration: none;&#10;    margin-bottom: 0.5rem;&#10;    transition: var(--transition);&#10;}&#10;&#10;.footer-section a:hover {&#10;    color: white;&#10;}&#10;&#10;.footer-bottom {&#10;    text-align: center;&#10;    padding-top: 2rem;&#10;    border-top: 1px solid rgba(255, 255, 255, 0.1);&#10;}&#10;&#10;/* Modal */&#10;.modal {&#10;    display: none;&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: rgba(0, 0, 0, 0.5);&#10;    z-index: 10000;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.modal.active {&#10;    display: flex;&#10;}&#10;&#10;.modal-content {&#10;    background: var(--bg-white);&#10;    border-radius: var(--radius-xl);&#10;    max-width: 500px;&#10;    width: 90%;&#10;    max-height: 90vh;&#10;    overflow-y: auto;&#10;    box-shadow: var(--shadow-xl);&#10;}&#10;&#10;.modal-header {&#10;    padding: 1.5rem;&#10;    border-bottom: 1px solid var(--border-color);&#10;}&#10;&#10;.modal-header h3 {&#10;    font-size: 1.5rem;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.modal-body {&#10;    padding: 1.5rem;&#10;}&#10;&#10;.tracking-code-display {&#10;    display: flex;&#10;    gap: 0.75rem;&#10;    margin: 1rem 0;&#10;}&#10;&#10;.tracking-code-display input {&#10;    flex: 1;&#10;    padding: 0.75rem;&#10;    border: 2px solid var(--primary-color);&#10;    border-radius: var(--radius-md);&#10;    font-size: 1.25rem;&#10;    font-weight: 700;&#10;    text-align: center;&#10;    background: var(--bg-light);&#10;}&#10;&#10;.modal-note {&#10;    color: var(--text-light);&#10;    font-size: 0.875rem;&#10;}&#10;&#10;.modal-footer {&#10;    padding: 1.5rem;&#10;    border-top: 1px solid var(--border-color);&#10;    display: flex;&#10;    gap: 1rem;&#10;}&#10;&#10;/* Tracking Page */&#10;.tracking-section {&#10;    padding: 4rem 0;&#10;    min-height: 60vh;&#10;}&#10;&#10;.tracking-container {&#10;    max-width: 800px;&#10;    margin: 0 auto;&#10;}&#10;&#10;.tracking-header {&#10;    text-align: center;&#10;    margin-bottom: 3rem;&#10;}&#10;&#10;.tracking-title {&#10;    font-size: 2.5rem;&#10;    font-weight: 800;&#10;    margin-bottom: 1rem;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.tracking-subtitle {&#10;    font-size: 1.125rem;&#10;    color: var(--text-light);&#10;}&#10;&#10;.tracking-form-card {&#10;    background: var(--bg-white);&#10;    padding: 2rem;&#10;    border-radius: var(--radius-xl);&#10;    box-shadow: var(--shadow-lg);&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.tracking-result {&#10;    margin-top: 2rem;&#10;}&#10;&#10;.result-card {&#10;    background: var(--bg-white);&#10;    border-radius: var(--radius-xl);&#10;    box-shadow: var(--shadow-lg);&#10;    overflow: hidden;&#10;}&#10;&#10;.result-header {&#10;    padding: 1.5rem;&#10;    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;    color: white;&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;}&#10;&#10;.status-badge {&#10;    padding: 0.5rem 1rem;&#10;    border-radius: var(--radius-md);&#10;    font-weight: 600;&#10;    font-size: 0.875rem;&#10;}&#10;&#10;.status-badge.pending {&#10;    background: var(--warning-color);&#10;}&#10;&#10;.status-badge.approved {&#10;    background: var(--success-color);&#10;}&#10;&#10;.status-badge.rejected {&#10;    background: var(--danger-color);&#10;}&#10;&#10;.result-body {&#10;    padding: 2rem;&#10;}&#10;&#10;.result-item {&#10;    display: grid;&#10;    grid-template-columns: 150px 1fr;&#10;    gap: 1rem;&#10;    margin-bottom: 1rem;&#10;    padding-bottom: 1rem;&#10;    border-bottom: 1px solid var(--border-color);&#10;}&#10;&#10;.result-item.full-width {&#10;    grid-template-columns: 1fr;&#10;}&#10;&#10;.result-label {&#10;    font-weight: 600;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.result-value {&#10;    color: var(--text-light);&#10;}&#10;&#10;.result-content {&#10;    background: var(--bg-light);&#10;    padding: 1rem;&#10;    border-radius: var(--radius-md);&#10;    white-space: pre-wrap;&#10;    word-wrap: break-word;&#10;}&#10;&#10;.result-footer {&#10;    padding: 1.5rem;&#10;    background: var(--bg-light);&#10;}&#10;&#10;.result-note {&#10;    color: var(--text-light);&#10;    font-size: 0.875rem;&#10;    text-align: center;&#10;}&#10;&#10;/* Info Section */&#10;.info-section {&#10;    padding: 4rem 0;&#10;}&#10;&#10;.info-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: 2rem;&#10;}&#10;&#10;.info-card {&#10;    text-align: center;&#10;    padding: 2rem;&#10;    background: var(--bg-white);&#10;    border-radius: var(--radius-xl);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.info-icon {&#10;    font-size: 3rem;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;.info-card h3 {&#10;    font-size: 1.25rem;&#10;    margin-bottom: 0.75rem;&#10;    color: var(--text-dark);&#10;}&#10;&#10;.info-card p {&#10;    color: var(--text-light);&#10;}&#10;&#10;/* Responsive */&#10;@media (max-width: 768px) {&#10;    .hero-content {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .hero-title {&#10;        font-size: 2rem;&#10;    }&#10;    &#10;    .nav-links {&#10;        gap: 1rem;&#10;    }&#10;    &#10;    .steps-grid,&#10;    .stats-grid,&#10;    .info-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .result-item {&#10;        grid-template-columns: 1fr;&#10;    }&#10;    &#10;    .modal-footer {&#10;        flex-direction: column;&#10;    }&#10;}&#10;&#10;/* Loading Spinner */&#10;.spinner {&#10;    display: inline-block;&#10;    width: 1rem;&#10;    height: 1rem;&#10;    border: 2px solid rgba(255, 255, 255, 0.3);&#10;    border-top-color: white;&#10;    border-radius: 50%;&#10;    animation: spin 0.6s linear infinite;&#10;}&#10;&#10;@keyframes spin {&#10;    to { transform: rotate(360deg); }&#10;}&#10;&#10;/* Animations */&#10;@keyframes slideIn {&#10;    from {&#10;        opacity: 0;&#10;        transform: translateY(-20px);&#10;    }&#10;    to {&#10;        opacity: 1;&#10;        transform: translateY(0);&#10;    }&#10;}&#10;&#10;@keyframes fadeIn {&#10;    from { opacity: 0; }&#10;    to { opacity: 1; }&#10;}&#10;&#10;.fade-in {&#10;    animation: fadeIn 0.5s ease-in;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/public/assets/css/vendor.min.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/assets/css/vendor.min.css" />
              <option name="updatedContent" value="/* Vendor CSS - Minimal Reset */&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/public/assets/js/app.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/assets/js/app.js" />
              <option name="updatedContent" value="// API Configuration&#10;const API_URL = window.location.origin;&#10;&#10;// Utility Functions&#10;function showMessage(message, type = 'success') {&#10;    const existingMsg = document.querySelector('.alert-message');&#10;    if (existingMsg) existingMsg.remove();&#10;&#10;    const alertDiv = document.createElement('div');&#10;    alertDiv.className = 'alert-message';&#10;    alertDiv.innerHTML = `&#10;        &lt;div style=&quot;&#10;            position: fixed;&#10;            top: 20px;&#10;            right: 20px;&#10;            background: ${type === 'success' ? '#10b981' : '#ef4444'};&#10;            color: white;&#10;            padding: 1rem 1.5rem;&#10;            border-radius: 0.5rem;&#10;            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);&#10;            z-index: 10000;&#10;            animation: slideIn 0.3s ease-out;&#10;            font-weight: 500;&#10;        &quot;&gt;&#10;            ${message}&#10;        &lt;/div&gt;&#10;    `;&#10;    document.body.appendChild(alertDiv);&#10;&#10;    setTimeout(() =&gt; {&#10;        alertDiv.style.transition = 'opacity 0.3s';&#10;        alertDiv.style.opacity = '0';&#10;        setTimeout(() =&gt; alertDiv.remove(), 300);&#10;    }, 5000);&#10;}&#10;&#10;function showLoading(button) {&#10;    button.disabled = true;&#10;    button.dataset.originalText = button.innerHTML;&#10;    button.innerHTML = '&lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt; Đang xử lý...';&#10;}&#10;&#10;function hideLoading(button) {&#10;    button.disabled = false;&#10;    if (button.dataset.originalText) {&#10;        button.innerHTML = button.dataset.originalText;&#10;    }&#10;}&#10;&#10;// Format date to Vietnamese format&#10;function formatDate(dateString) {&#10;    const date = new Date(dateString);&#10;    const options = { &#10;        year: 'numeric', &#10;        month: 'long', &#10;        day: 'numeric', &#10;        hour: '2-digit', &#10;        minute: '2-digit' &#10;    };&#10;    return date.toLocaleDateString('vi-VN', options);&#10;}&#10;&#10;// Confession Form Handler&#10;const confessionForm = document.getElementById('confession-form');&#10;if (confessionForm) {&#10;    const contentTextarea = document.getElementById('content');&#10;    const charCount = document.querySelector('.char-count');&#10;&#10;    // Character counter&#10;    if (contentTextarea &amp;&amp; charCount) {&#10;        contentTextarea.addEventListener('input', function() {&#10;            const count = this.value.length;&#10;            charCount.textContent = `${count}/5000 ký tự`;&#10;            if (count &gt; 4500) {&#10;                charCount.style.color = '#ef4444';&#10;            } else {&#10;                charCount.style.color = '#9ca3af';&#10;            }&#10;        });&#10;    }&#10;&#10;    // Form submission&#10;    confessionForm.addEventListener('submit', async function(e) {&#10;        e.preventDefault();&#10;&#10;        const submitBtn = this.querySelector('button[type=&quot;submit&quot;]');&#10;        showLoading(submitBtn);&#10;&#10;        const formData = {&#10;            category: document.getElementById('category').value,&#10;            content: document.getElementById('content').value,&#10;            photo: document.getElementById('photo').value || null,&#10;            note: document.getElementById('note').value || null&#10;        };&#10;&#10;        try {&#10;            const response = await fetch(`${API_URL}/api/confessions`, {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json'&#10;                },&#10;                body: JSON.stringify(formData)&#10;            });&#10;&#10;            const data = await response.json();&#10;&#10;            if (data.success) {&#10;                // Show modal with tracking code&#10;                showTrackingModal(data.trackingCode);&#10;                &#10;                // Reset form&#10;                confessionForm.reset();&#10;                if (charCount) charCount.textContent = '0/5000 ký tự';&#10;                &#10;                showMessage('Tâm sự của bạn đã được gửi thành công!', 'success');&#10;            } else {&#10;                showMessage(data.message || 'Có lỗi xảy ra. Vui lòng thử lại!', 'error');&#10;            }&#10;        } catch (error) {&#10;            console.error('Error:', error);&#10;            showMessage('Không thể kết nối đến server. Vui lòng thử lại!', 'error');&#10;        } finally {&#10;            hideLoading(submitBtn);&#10;        }&#10;    });&#10;}&#10;&#10;// Show Tracking Modal&#10;function showTrackingModal(trackingCode) {&#10;    const modal = document.getElementById('success-modal');&#10;    const trackingCodeText = document.getElementById('tracking-code-text');&#10;    const copyBtn = document.getElementById('copy-code-btn');&#10;    const closeBtn = document.getElementById('close-modal-btn');&#10;&#10;    if (modal &amp;&amp; trackingCodeText) {&#10;        trackingCodeText.value = trackingCode;&#10;        modal.classList.add('active');&#10;&#10;        // Copy tracking code&#10;        if (copyBtn) {&#10;            copyBtn.onclick = function() {&#10;                trackingCodeText.select();&#10;                document.execCommand('copy');&#10;                this.textContent = '✓ Đã Sao Chép';&#10;                setTimeout(() =&gt; {&#10;                    this.textContent = 'Sao Chép';&#10;                }, 2000);&#10;            };&#10;        }&#10;&#10;        // Close modal&#10;        if (closeBtn) {&#10;            closeBtn.onclick = function() {&#10;                modal.classList.remove('active');&#10;            };&#10;        }&#10;&#10;        // Close on background click&#10;        modal.onclick = function(e) {&#10;            if (e.target === modal) {&#10;                modal.classList.remove('active');&#10;            }&#10;        };&#10;    }&#10;}&#10;&#10;// Tracking Form Handler&#10;const trackingForm = document.getElementById('tracking-form');&#10;if (trackingForm) {&#10;    trackingForm.addEventListener('submit', async function(e) {&#10;        e.preventDefault();&#10;&#10;        const submitBtn = this.querySelector('button[type=&quot;submit&quot;]');&#10;        const trackingCode = document.getElementById('tracking-code').value.trim().toUpperCase();&#10;        const resultDiv = document.getElementById('tracking-result');&#10;&#10;        if (!trackingCode) {&#10;            showMessage('Vui lòng nhập mã theo dõi!', 'error');&#10;            return;&#10;        }&#10;&#10;        showLoading(submitBtn);&#10;&#10;        try {&#10;            const response = await fetch(`${API_URL}/api/confessions/${trackingCode}`);&#10;            const data = await response.json();&#10;&#10;            if (data.success &amp;&amp; data.confession) {&#10;                displayTrackingResult(data.confession);&#10;                resultDiv.style.display = 'block';&#10;                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });&#10;            } else {&#10;                showMessage(data.message || 'Không tìm thấy tâm sự với mã này!', 'error');&#10;                resultDiv.style.display = 'none';&#10;            }&#10;        } catch (error) {&#10;            console.error('Error:', error);&#10;            showMessage('Không thể kết nối đến server. Vui lòng thử lại!', 'error');&#10;            resultDiv.style.display = 'none';&#10;        } finally {&#10;            hideLoading(submitBtn);&#10;        }&#10;    });&#10;}&#10;&#10;// Display Tracking Result&#10;function displayTrackingResult(confession) {&#10;    const categoryEmojis = {&#10;        'Love': '',&#10;        'Family': '‍‍',&#10;        'Friendship': '',&#10;        'Work': '',&#10;        'Study': '',&#10;        'Life': '',&#10;        'Secret': '',&#10;        'Other': ''&#10;    };&#10;&#10;    const statusMessages = {&#10;        'Pending': '⏳ Tâm sự của bạn đang chờ được xem xét. Chúng tôi sẽ kiểm duyệt sớm nhất có thể!',&#10;        'Approved': '✅ Tâm sự của bạn đã được phê duyệt và đăng lên. Cảm ơn bạn đã chia sẻ!',&#10;        'Rejected': '❌ Tâm sự không phù hợp với chính sách của chúng tôi. Vui lòng xem lại nội dung.'&#10;    };&#10;&#10;    const statusVietnamese = {&#10;        'Pending': 'Đang Chờ Duyệt',&#10;        'Approved': 'Đã Phê Duyệt',&#10;        'Rejected': 'Đã Từ Chối'&#10;    };&#10;&#10;    document.getElementById('result-code').textContent = confession.tracking_code;&#10;    document.getElementById('result-category').textContent = &#10;        `${categoryEmojis[confession.category] || ''} ${confession.category}`;&#10;    document.getElementById('result-status').textContent = statusVietnamese[confession.status] || confession.status;&#10;    document.getElementById('result-date').textContent = formatDate(confession.created_at);&#10;    document.getElementById('result-content').textContent = confession.content;&#10;    &#10;    const statusBadge = document.getElementById('status-badge');&#10;    statusBadge.textContent = statusVietnamese[confession.status] || confession.status;&#10;    statusBadge.className = `status-badge ${confession.status.toLowerCase()}`;&#10;    &#10;    const statusMessage = document.getElementById('status-message');&#10;    statusMessage.textContent = statusMessages[confession.status] || '';&#10;}&#10;&#10;// Stats Counter Animation&#10;function animateCounter(element) {&#10;    const target = parseInt(element.getAttribute('data-target'));&#10;    if (!target) return;&#10;&#10;    const duration = 2000;&#10;    const increment = target / (duration / 16);&#10;    let current = 0;&#10;&#10;    const timer = setInterval(() =&gt; {&#10;        current += increment;&#10;        if (current &gt;= target) {&#10;            element.textContent = target.toLocaleString();&#10;            clearInterval(timer);&#10;        } else {&#10;            element.textContent = Math.floor(current).toLocaleString();&#10;        }&#10;    }, 16);&#10;}&#10;&#10;// Intersection Observer for Stats&#10;const statsObserver = new IntersectionObserver((entries) =&gt; {&#10;    entries.forEach(entry =&gt; {&#10;        if (entry.isIntersecting) {&#10;            const counters = entry.target.querySelectorAll('.stat-number[data-target]');&#10;            counters.forEach(counter =&gt; animateCounter(counter));&#10;            statsObserver.unobserve(entry.target);&#10;        }&#10;    });&#10;}, { threshold: 0.5 });&#10;&#10;const statsSection = document.querySelector('.stats-section');&#10;if (statsSection) {&#10;    statsObserver.observe(statsSection);&#10;}&#10;&#10;// Smooth scroll for navigation links&#10;document.querySelectorAll('a[href^=&quot;#&quot;]').forEach(anchor =&gt; {&#10;    anchor.addEventListener('click', function(e) {&#10;        const href = this.getAttribute('href');&#10;        if (href === '#') return;&#10;        &#10;        e.preventDefault();&#10;        const target = document.querySelector(href);&#10;        if (target) {&#10;            target.scrollIntoView({ behavior: 'smooth', block: 'start' });&#10;        }&#10;    });&#10;});&#10;&#10;// Active navigation link on scroll&#10;window.addEventListener('scroll', () =&gt; {&#10;    const sections = document.querySelectorAll('section[id]');&#10;    const navLinks = document.querySelectorAll('.nav-link');&#10;    &#10;    let current = '';&#10;    sections.forEach(section =&gt; {&#10;        const sectionTop = section.offsetTop;&#10;        const sectionHeight = section.clientHeight;&#10;        if (window.pageYOffset &gt;= sectionTop - 100) {&#10;            current = section.getAttribute('id');&#10;        }&#10;    });&#10;&#10;    navLinks.forEach(link =&gt; {&#10;        link.classList.remove('active');&#10;        if (link.getAttribute('href') === `#${current}`) {&#10;            link.classList.add('active');&#10;        }&#10;    });&#10;});&#10;&#10;console.log('Anonymous Confessions App Loaded ✨');&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/public/assets/js/scripts.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/assets/js/scripts.js" />
              <option name="updatedContent" value="// Additional Scripts for Enhanced User Experience&#10;&#10;// Auto-resize textarea&#10;document.querySelectorAll('textarea.form-control').forEach(textarea =&gt; {&#10;    textarea.addEventListener('input', function() {&#10;        this.style.height = 'auto';&#10;        this.style.height = (this.scrollHeight) + 'px';&#10;    });&#10;});&#10;&#10;// Form validation feedback&#10;document.querySelectorAll('.form-control').forEach(input =&gt; {&#10;    input.addEventListener('blur', function() {&#10;        if (this.hasAttribute('required') &amp;&amp; !this.value.trim()) {&#10;            this.style.borderColor = '#ef4444';&#10;        } else if (this.value.trim()) {&#10;            this.style.borderColor = '#10b981';&#10;        } else {&#10;            this.style.borderColor = '#e5e7eb';&#10;        }&#10;    });&#10;&#10;    input.addEventListener('focus', function() {&#10;        this.style.borderColor = '#6366f1';&#10;    });&#10;});&#10;&#10;// Prevent form resubmission on page refresh&#10;if (window.history.replaceState) {&#10;    window.history.replaceState(null, null, window.location.href);&#10;}&#10;&#10;// Add loading state to page&#10;window.addEventListener('beforeunload', function() {&#10;    document.body.style.opacity = '0.7';&#10;});&#10;&#10;// Keyboard shortcuts&#10;document.addEventListener('keydown', function(e) {&#10;    // ESC to close modal&#10;    if (e.key === 'Escape') {&#10;        const modal = document.querySelector('.modal.active');&#10;        if (modal) {&#10;            modal.classList.remove('active');&#10;        }&#10;    }&#10;    &#10;    // Ctrl/Cmd + K to focus tracking code input&#10;    if ((e.ctrlKey || e.metaKey) &amp;&amp; e.key === 'k') {&#10;        e.preventDefault();&#10;        const trackingInput = document.getElementById('tracking-code');&#10;        if (trackingInput) {&#10;            trackingInput.focus();&#10;        }&#10;    }&#10;});&#10;&#10;// Add fade-in animation to cards&#10;const observerOptions = {&#10;    threshold: 0.1,&#10;    rootMargin: '0px 0px -50px 0px'&#10;};&#10;&#10;const fadeInObserver = new IntersectionObserver((entries) =&gt; {&#10;    entries.forEach((entry, index) =&gt; {&#10;        if (entry.isIntersecting) {&#10;            setTimeout(() =&gt; {&#10;                entry.target.classList.add('fade-in');&#10;            }, index * 100);&#10;            fadeInObserver.unobserve(entry.target);&#10;        }&#10;    });&#10;}, observerOptions);&#10;&#10;document.querySelectorAll('.step-card, .info-card, .form-card').forEach(card =&gt; {&#10;    fadeInObserver.observe(card);&#10;});&#10;&#10;// Mobile menu toggle (if needed)&#10;const createMobileMenu = () =&gt; {&#10;    const navbar = document.querySelector('.navbar');&#10;    if (!navbar) return;&#10;&#10;    if (window.innerWidth &lt;= 768) {&#10;        const navLinks = document.querySelector('.nav-links');&#10;        if (navLinks &amp;&amp; !document.querySelector('.mobile-menu-toggle')) {&#10;            const toggleBtn = document.createElement('button');&#10;            toggleBtn.className = 'mobile-menu-toggle';&#10;            toggleBtn.innerHTML = '☰';&#10;            toggleBtn.style.cssText = `&#10;                display: block;&#10;                font-size: 1.5rem;&#10;                background: none;&#10;                border: none;&#10;                cursor: pointer;&#10;                color: var(--text-dark);&#10;            `;&#10;            &#10;            toggleBtn.addEventListener('click', () =&gt; {&#10;                navLinks.classList.toggle('active');&#10;                toggleBtn.textContent = navLinks.classList.contains('active') ? '✕' : '☰';&#10;            });&#10;&#10;            navbar.appendChild(toggleBtn);&#10;&#10;            // Mobile styles for nav-links&#10;            navLinks.style.cssText = `&#10;                position: absolute;&#10;                top: 100%;&#10;                left: 0;&#10;                right: 0;&#10;                background: white;&#10;                flex-direction: column;&#10;                padding: 1rem;&#10;                box-shadow: 0 4px 6px rgba(0,0,0,0.1);&#10;                display: none;&#10;            `;&#10;&#10;            const style = document.createElement('style');&#10;            style.textContent = `&#10;                .nav-links.active {&#10;                    display: flex !important;&#10;                }&#10;            `;&#10;            document.head.appendChild(style);&#10;        }&#10;    }&#10;};&#10;&#10;// Initialize on load and resize&#10;window.addEventListener('load', createMobileMenu);&#10;window.addEventListener('resize', createMobileMenu);&#10;&#10;// Add tooltip functionality&#10;document.querySelectorAll('[data-tooltip]').forEach(element =&gt; {&#10;    element.addEventListener('mouseenter', function() {&#10;        const tooltip = document.createElement('div');&#10;        tooltip.className = 'tooltip';&#10;        tooltip.textContent = this.getAttribute('data-tooltip');&#10;        tooltip.style.cssText = `&#10;            position: absolute;&#10;            background: rgba(0, 0, 0, 0.8);&#10;            color: white;&#10;            padding: 0.5rem 0.75rem;&#10;            border-radius: 0.25rem;&#10;            font-size: 0.875rem;&#10;            z-index: 10001;&#10;            pointer-events: none;&#10;        `;&#10;        document.body.appendChild(tooltip);&#10;&#10;        const rect = this.getBoundingClientRect();&#10;        tooltip.style.top = (rect.top - tooltip.offsetHeight - 5) + 'px';&#10;        tooltip.style.left = (rect.left + rect.width / 2 - tooltip.offsetWidth / 2) + 'px';&#10;&#10;        this._tooltip = tooltip;&#10;    });&#10;&#10;    element.addEventListener('mouseleave', function() {&#10;        if (this._tooltip) {&#10;            this._tooltip.remove();&#10;            this._tooltip = null;&#10;        }&#10;    });&#10;});&#10;&#10;// Performance monitoring&#10;if ('performance' in window) {&#10;    window.addEventListener('load', () =&gt; {&#10;        setTimeout(() =&gt; {&#10;            const perfData = window.performance.timing;&#10;            const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;&#10;            console.log(`Page loaded in ${pageLoadTime}ms`);&#10;        }, 0);&#10;    });&#10;}&#10;&#10;// Service Worker registration (optional, for PWA)&#10;if ('serviceWorker' in navigator) {&#10;    window.addEventListener('load', () =&gt; {&#10;        // Uncomment to enable service worker&#10;        // navigator.serviceWorker.register('/sw.js')&#10;        //     .then(reg =&gt; console.log('Service Worker registered'))&#10;        //     .catch(err =&gt; console.log('Service Worker registration failed'));&#10;    });&#10;}&#10;&#10;console.log('Enhanced scripts loaded ✨');&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/public/confession.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/confession.html" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;vi&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Theo Dõi Tâm Sự - Anonymous Confessions&lt;/title&gt;&#10;    &lt;meta name=&quot;description&quot; content=&quot;Theo dõi trạng thái tâm sự của bạn&quot;&gt;&#10;    &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;/assets/images/favicon.png&quot;&gt;&#10;    &#10;    &lt;!-- Optimized CSS --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;/assets/css/vendor.min.css&quot;&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;/assets/css/style.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;!-- Header --&gt;&#10;    &lt;header class=&quot;main-header&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;nav class=&quot;navbar&quot;&gt;&#10;                &lt;div class=&quot;logo&quot;&gt;&#10;                    &lt;img src=&quot;/assets/images/logo.png&quot; alt=&quot;Logo&quot; height=&quot;40&quot;&gt;&#10;                    &lt;span class=&quot;brand-name&quot;&gt;Anonymous Confessions&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;nav-links&quot;&gt;&#10;                    &lt;a href=&quot;/&quot; class=&quot;nav-link&quot;&gt;Trang Chủ&lt;/a&gt;&#10;                    &lt;a href=&quot;/#how-it-works&quot; class=&quot;nav-link&quot;&gt;Cách Hoạt Động&lt;/a&gt;&#10;                    &lt;a href=&quot;/confession.html&quot; class=&quot;nav-link active&quot;&gt;Theo Dõi&lt;/a&gt;&#10;                &lt;/div&gt;&#10;            &lt;/nav&gt;&#10;        &lt;/div&gt;&#10;    &lt;/header&gt;&#10;&#10;    &lt;!-- Tracking Section --&gt;&#10;    &lt;section class=&quot;tracking-section&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;div class=&quot;tracking-container&quot;&gt;&#10;                &lt;div class=&quot;tracking-header&quot;&gt;&#10;                    &lt;h1 class=&quot;tracking-title&quot;&gt;Theo Dõi Tâm Sự&lt;/h1&gt;&#10;                    &lt;p class=&quot;tracking-subtitle&quot;&gt;Nhập mã theo dõi để xem trạng thái tâm sự của bạn&lt;/p&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;div class=&quot;tracking-form-card&quot;&gt;&#10;                    &lt;form id=&quot;tracking-form&quot;&gt;&#10;                        &lt;div class=&quot;form-group&quot;&gt;&#10;                            &lt;label for=&quot;tracking-code&quot;&gt;Mã Theo Dõi&lt;/label&gt;&#10;                            &lt;input &#10;                                type=&quot;text&quot; &#10;                                id=&quot;tracking-code&quot; &#10;                                name=&quot;tracking-code&quot; &#10;                                class=&quot;form-control&quot; &#10;                                placeholder=&quot;Nhập mã theo dõi (vd: A1B2C3D4)&quot;&#10;                                required&#10;                                maxlength=&quot;8&quot;&#10;                                style=&quot;text-transform: uppercase;&quot;&#10;                            &gt;&#10;                        &lt;/div&gt;&#10;                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary btn-block&quot;&gt;&#10;                            &lt;span class=&quot;btn-text&quot;&gt;Kiểm Tra&lt;/span&gt;&#10;                        &lt;/button&gt;&#10;                    &lt;/form&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;!-- Result Section --&gt;&#10;                &lt;div id=&quot;tracking-result&quot; class=&quot;tracking-result&quot; style=&quot;display: none;&quot;&gt;&#10;                    &lt;div class=&quot;result-card&quot;&gt;&#10;                        &lt;div class=&quot;result-header&quot;&gt;&#10;                            &lt;h3&gt;Kết Quả Theo Dõi&lt;/h3&gt;&#10;                            &lt;span class=&quot;status-badge&quot; id=&quot;status-badge&quot;&gt;&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;result-body&quot;&gt;&#10;                            &lt;div class=&quot;result-item&quot;&gt;&#10;                                &lt;span class=&quot;result-label&quot;&gt;Mã Theo Dõi:&lt;/span&gt;&#10;                                &lt;span class=&quot;result-value&quot; id=&quot;result-code&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;result-item&quot;&gt;&#10;                                &lt;span class=&quot;result-label&quot;&gt;Chủ Đề:&lt;/span&gt;&#10;                                &lt;span class=&quot;result-value&quot; id=&quot;result-category&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;result-item&quot;&gt;&#10;                                &lt;span class=&quot;result-label&quot;&gt;Trạng Thái:&lt;/span&gt;&#10;                                &lt;span class=&quot;result-value&quot; id=&quot;result-status&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;result-item&quot;&gt;&#10;                                &lt;span class=&quot;result-label&quot;&gt;Ngày Gửi:&lt;/span&gt;&#10;                                &lt;span class=&quot;result-value&quot; id=&quot;result-date&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;result-item full-width&quot;&gt;&#10;                                &lt;span class=&quot;result-label&quot;&gt;Nội Dung:&lt;/span&gt;&#10;                                &lt;div class=&quot;result-content&quot; id=&quot;result-content&quot;&gt;&lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;result-footer&quot;&gt;&#10;                            &lt;p class=&quot;result-note&quot; id=&quot;status-message&quot;&gt;&lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/section&gt;&#10;&#10;    &lt;!-- Info Section --&gt;&#10;    &lt;section class=&quot;info-section&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;div class=&quot;info-grid&quot;&gt;&#10;                &lt;div class=&quot;info-card&quot;&gt;&#10;                    &lt;div class=&quot;info-icon&quot;&gt;⏳&lt;/div&gt;&#10;                    &lt;h3&gt;Pending&lt;/h3&gt;&#10;                    &lt;p&gt;Tâm sự của bạn đang chờ được xem xét&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;info-card&quot;&gt;&#10;                    &lt;div class=&quot;info-icon&quot;&gt;✅&lt;/div&gt;&#10;                    &lt;h3&gt;Approved&lt;/h3&gt;&#10;                    &lt;p&gt;Tâm sự của bạn đã được phê duyệt và đăng lên&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;info-card&quot;&gt;&#10;                    &lt;div class=&quot;info-icon&quot;&gt;❌&lt;/div&gt;&#10;                    &lt;h3&gt;Rejected&lt;/h3&gt;&#10;                    &lt;p&gt;Tâm sự không phù hợp với chính sách của chúng tôi&lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/section&gt;&#10;&#10;    &lt;!-- Footer --&gt;&#10;    &lt;footer class=&quot;main-footer&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;div class=&quot;footer-content&quot;&gt;&#10;                &lt;div class=&quot;footer-section&quot;&gt;&#10;                    &lt;h4&gt;Anonymous Confessions&lt;/h4&gt;&#10;                    &lt;p&gt;Nơi an toàn để chia sẻ tâm sự&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;footer-section&quot;&gt;&#10;                    &lt;h4&gt;Liên Kết&lt;/h4&gt;&#10;                    &lt;a href=&quot;/&quot;&gt;Trang Chủ&lt;/a&gt;&#10;                    &lt;a href=&quot;/confession.html&quot;&gt;Theo Dõi&lt;/a&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;footer-section&quot;&gt;&#10;                    &lt;h4&gt;Chính Sách&lt;/h4&gt;&#10;                    &lt;a href=&quot;#&quot;&gt;Quyền Riêng Tư&lt;/a&gt;&#10;                    &lt;a href=&quot;#&quot;&gt;Điều Khoản&lt;/a&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;footer-bottom&quot;&gt;&#10;                &lt;p&gt;&amp;copy; 2025 Anonymous Confessions. All rights reserved.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/footer&gt;&#10;&#10;    &lt;!-- Scripts --&gt;&#10;    &lt;script src=&quot;/assets/js/app.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;/assets/js/scripts.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/public/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/index.html" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;vi&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Anonymous Confessions - Nơi Bạn Tâm Sự An Toàn&lt;/title&gt;&#10;    &lt;meta name=&quot;description&quot; content=&quot;Chia sẻ những tâm sự, bí mật của bạn một cách ẩn danh và bảo mật&quot;&gt;&#10;    &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;/assets/images/favicon.png&quot;&gt;&#10;    &#10;    &lt;!-- Optimized CSS --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;/assets/css/vendor.min.css&quot;&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;/assets/css/style.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;!-- Header --&gt;&#10;    &lt;header class=&quot;main-header&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;nav class=&quot;navbar&quot;&gt;&#10;                &lt;div class=&quot;logo&quot;&gt;&#10;                    &lt;img src=&quot;/assets/images/logo.png&quot; alt=&quot;Logo&quot; height=&quot;40&quot;&gt;&#10;                    &lt;span class=&quot;brand-name&quot;&gt;Anonymous Confessions&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;nav-links&quot;&gt;&#10;                    &lt;a href=&quot;#home&quot; class=&quot;nav-link active&quot;&gt;Trang Chủ&lt;/a&gt;&#10;                    &lt;a href=&quot;#how-it-works&quot; class=&quot;nav-link&quot;&gt;Cách Hoạt Động&lt;/a&gt;&#10;                    &lt;a href=&quot;/confession.html&quot; class=&quot;nav-link&quot;&gt;Theo Dõi&lt;/a&gt;&#10;                &lt;/div&gt;&#10;            &lt;/nav&gt;&#10;        &lt;/div&gt;&#10;    &lt;/header&gt;&#10;&#10;    &lt;!-- Hero Section --&gt;&#10;    &lt;section id=&quot;home&quot; class=&quot;hero-section&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;div class=&quot;hero-content&quot;&gt;&#10;                &lt;div class=&quot;hero-text&quot;&gt;&#10;                    &lt;h1 class=&quot;hero-title&quot;&gt;Chia Sẻ Tâm Sự Ẩn Danh&lt;/h1&gt;&#10;                    &lt;p class=&quot;hero-subtitle&quot;&gt;Nơi an toàn để bạn chia sẻ những điều trong lòng mà không lo bị phán xét&lt;/p&gt;&#10;                    &lt;div class=&quot;hero-features&quot;&gt;&#10;                        &lt;div class=&quot;feature-item&quot;&gt;&#10;                            &lt;span class=&quot;feature-icon&quot;&gt;&lt;/span&gt;&#10;                            &lt;span&gt;100% Ẩn Danh&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;feature-item&quot;&gt;&#10;                            &lt;span class=&quot;feature-icon&quot;&gt;&lt;/span&gt;&#10;                            &lt;span&gt;Tự Do Tâm Sự&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;feature-item&quot;&gt;&#10;                            &lt;span class=&quot;feature-icon&quot;&gt;✨&lt;/span&gt;&#10;                            &lt;span&gt;Bảo Mật Tuyệt Đối&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;hero-form&quot;&gt;&#10;                    &lt;div class=&quot;form-card&quot;&gt;&#10;                        &lt;h2 class=&quot;form-title&quot;&gt;Gửi Tâm Sự Của Bạn&lt;/h2&gt;&#10;                        &lt;form id=&quot;confession-form&quot;&gt;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;category&quot;&gt;Chủ Đề&lt;/label&gt;&#10;                                &lt;select id=&quot;category&quot; name=&quot;category&quot; class=&quot;form-control&quot; required&gt;&#10;                                    &lt;option value=&quot;&quot;&gt;Chọn chủ đề...&lt;/option&gt;&#10;                                    &lt;option value=&quot;Love&quot;&gt; Tình Yêu&lt;/option&gt;&#10;                                    &lt;option value=&quot;Family&quot;&gt;‍‍ Gia Đình&lt;/option&gt;&#10;                                    &lt;option value=&quot;Friendship&quot;&gt; Bạn Bè&lt;/option&gt;&#10;                                    &lt;option value=&quot;Work&quot;&gt; Công Việc&lt;/option&gt;&#10;                                    &lt;option value=&quot;Study&quot;&gt; Học Tập&lt;/option&gt;&#10;                                    &lt;option value=&quot;Life&quot;&gt; Cuộc Sống&lt;/option&gt;&#10;                                    &lt;option value=&quot;Secret&quot;&gt; Bí Mật&lt;/option&gt;&#10;                                    &lt;option value=&quot;Other&quot;&gt; Khác&lt;/option&gt;&#10;                                &lt;/select&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;content&quot;&gt;Nội Dung Tâm Sự&lt;/label&gt;&#10;                                &lt;textarea &#10;                                    id=&quot;content&quot; &#10;                                    name=&quot;content&quot; &#10;                                    class=&quot;form-control&quot; &#10;                                    rows=&quot;6&quot; &#10;                                    placeholder=&quot;Hãy chia sẻ những điều trong lòng bạn...&quot;&#10;                                    required&#10;                                    maxlength=&quot;5000&quot;&#10;                                &gt;&lt;/textarea&gt;&#10;                                &lt;small class=&quot;char-count&quot;&gt;0/5000 ký tự&lt;/small&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;photo&quot;&gt;Link Ảnh (Tùy Chọn)&lt;/label&gt;&#10;                                &lt;input &#10;                                    type=&quot;url&quot; &#10;                                    id=&quot;photo&quot; &#10;                                    name=&quot;photo&quot; &#10;                                    class=&quot;form-control&quot; &#10;                                    placeholder=&quot;https://example.com/image.jpg&quot;&#10;                                &gt;&#10;                                &lt;small class=&quot;form-hint&quot;&gt;Nhập link ảnh từ Imgur, Google Photos, etc.&lt;/small&gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;div class=&quot;form-group&quot;&gt;&#10;                                &lt;label for=&quot;note&quot;&gt;Ghi Chú (Tùy Chọn)&lt;/label&gt;&#10;                                &lt;input &#10;                                    type=&quot;text&quot; &#10;                                    id=&quot;note&quot; &#10;                                    name=&quot;note&quot; &#10;                                    class=&quot;form-control&quot; &#10;                                    placeholder=&quot;Thêm ghi chú cho admin...&quot;&#10;                                    maxlength=&quot;200&quot;&#10;                                &gt;&#10;                            &lt;/div&gt;&#10;&#10;                            &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary btn-block&quot;&gt;&#10;                                &lt;span class=&quot;btn-text&quot;&gt;Gửi Tâm Sự&lt;/span&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/form&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/section&gt;&#10;&#10;    &lt;!-- How It Works Section --&gt;&#10;    &lt;section id=&quot;how-it-works&quot; class=&quot;how-section&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;h2 class=&quot;section-title&quot;&gt;Cách Thức Hoạt Động&lt;/h2&gt;&#10;            &lt;div class=&quot;steps-grid&quot;&gt;&#10;                &lt;div class=&quot;step-card&quot;&gt;&#10;                    &lt;div class=&quot;step-number&quot;&gt;1&lt;/div&gt;&#10;                    &lt;div class=&quot;step-icon&quot;&gt;✍️&lt;/div&gt;&#10;                    &lt;h3&gt;Viết Tâm Sự&lt;/h3&gt;&#10;                    &lt;p&gt;Chia sẻ những điều bạn muốn nói một cách hoàn toàn ẩn danh&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;step-card&quot;&gt;&#10;                    &lt;div class=&quot;step-number&quot;&gt;2&lt;/div&gt;&#10;                    &lt;div class=&quot;step-icon&quot;&gt;&lt;/div&gt;&#10;                    &lt;h3&gt;Nhận Mã Theo Dõi&lt;/h3&gt;&#10;                    &lt;p&gt;Bạn sẽ nhận được mã để theo dõi trạng thái tâm sự của mình&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;step-card&quot;&gt;&#10;                    &lt;div class=&quot;step-number&quot;&gt;3&lt;/div&gt;&#10;                    &lt;div class=&quot;step-icon&quot;&gt;&lt;/div&gt;&#10;                    &lt;h3&gt;Kiểm Duyệt&lt;/h3&gt;&#10;                    &lt;p&gt;Admin sẽ xem xét và phê duyệt tâm sự của bạn&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;step-card&quot;&gt;&#10;                    &lt;div class=&quot;step-number&quot;&gt;4&lt;/div&gt;&#10;                    &lt;div class=&quot;step-icon&quot;&gt;&lt;/div&gt;&#10;                    &lt;h3&gt;Được Đăng&lt;/h3&gt;&#10;                    &lt;p&gt;Tâm sự của bạn sẽ được chia sẻ cộng đồng nếu được duyệt&lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/section&gt;&#10;&#10;    &lt;!-- Stats Section --&gt;&#10;    &lt;section class=&quot;stats-section&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;div class=&quot;stats-grid&quot;&gt;&#10;                &lt;div class=&quot;stat-item&quot;&gt;&#10;                    &lt;div class=&quot;stat-number&quot; data-target=&quot;1000&quot;&gt;0&lt;/div&gt;&#10;                    &lt;div class=&quot;stat-label&quot;&gt;Tâm Sự Đã Gửi&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;stat-item&quot;&gt;&#10;                    &lt;div class=&quot;stat-number&quot; data-target=&quot;500&quot;&gt;0&lt;/div&gt;&#10;                    &lt;div class=&quot;stat-label&quot;&gt;Người Tham Gia&lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;stat-item&quot;&gt;&#10;                    &lt;div class=&quot;stat-number&quot;&gt;100%&lt;/div&gt;&#10;                    &lt;div class=&quot;stat-label&quot;&gt;Bảo Mật&lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/section&gt;&#10;&#10;    &lt;!-- Footer --&gt;&#10;    &lt;footer class=&quot;main-footer&quot;&gt;&#10;        &lt;div class=&quot;container&quot;&gt;&#10;            &lt;div class=&quot;footer-content&quot;&gt;&#10;                &lt;div class=&quot;footer-section&quot;&gt;&#10;                    &lt;h4&gt;Anonymous Confessions&lt;/h4&gt;&#10;                    &lt;p&gt;Nơi an toàn để chia sẻ tâm sự&lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;footer-section&quot;&gt;&#10;                    &lt;h4&gt;Liên Kết&lt;/h4&gt;&#10;                    &lt;a href=&quot;#home&quot;&gt;Trang Chủ&lt;/a&gt;&#10;                    &lt;a href=&quot;/confession.html&quot;&gt;Theo Dõi&lt;/a&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;footer-section&quot;&gt;&#10;                    &lt;h4&gt;Chính Sách&lt;/h4&gt;&#10;                    &lt;a href=&quot;#&quot;&gt;Quyền Riêng Tư&lt;/a&gt;&#10;                    &lt;a href=&quot;#&quot;&gt;Điều Khoản&lt;/a&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;footer-bottom&quot;&gt;&#10;                &lt;p&gt;&amp;copy; 2025 Anonymous Confessions. All rights reserved.&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/footer&gt;&#10;&#10;    &lt;!-- Modal for Tracking Code --&gt;&#10;    &lt;div id=&quot;success-modal&quot; class=&quot;modal&quot;&gt;&#10;        &lt;div class=&quot;modal-content&quot;&gt;&#10;            &lt;div class=&quot;modal-header&quot;&gt;&#10;                &lt;h3&gt;✅ Gửi Thành Công!&lt;/h3&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;modal-body&quot;&gt;&#10;                &lt;p&gt;Tâm sự của bạn đã được gửi. Vui lòng lưu mã theo dõi:&lt;/p&gt;&#10;                &lt;div class=&quot;tracking-code-display&quot;&gt;&#10;                    &lt;input type=&quot;text&quot; id=&quot;tracking-code-text&quot; readonly&gt;&#10;                    &lt;button id=&quot;copy-code-btn&quot; class=&quot;btn btn-secondary&quot;&gt;Sao Chép&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;p class=&quot;modal-note&quot;&gt;Sử dụng mã này để theo dõi trạng thái tâm sự của bạn&lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;modal-footer&quot;&gt;&#10;                &lt;button id=&quot;close-modal-btn&quot; class=&quot;btn btn-primary&quot;&gt;Đóng&lt;/button&gt;&#10;                &lt;a href=&quot;/confession.html&quot; class=&quot;btn btn-outline&quot;&gt;Theo Dõi Ngay&lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Scripts --&gt;&#10;    &lt;script src=&quot;/assets/js/app.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;/assets/js/scripts.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/server.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/server.js" />
              <option name="originalContent" value="const express = require('express');&#10;const sqlite3 = require('sqlite3').verbose();&#10;const path = require('path');&#10;const crypto = require('crypto');&#10;const cors = require('cors');&#10;&#10;const app = express();&#10;const PORT = process.env.PORT || 3000;&#10;&#10;// Middleware&#10;app.use(cors());&#10;app.use(express.json());&#10;app.use(express.urlencoded({ extended: true }));&#10;app.use(express.static(path.join(__dirname, 'public')));&#10;&#10;// Database setup&#10;const db = new sqlite3.Database('./confessions.db', (err) =&gt; {&#10;    if (err) {&#10;        console.error('Database connection error:', err);&#10;    } else {&#10;        console.log('Connected to SQLite database');&#10;        initDatabase();&#10;    }&#10;});&#10;&#10;// Initialize database schema&#10;function initDatabase() {&#10;    db.run(`CREATE TABLE IF NOT EXISTS confessions (&#10;        id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;        tracking_code TEXT UNIQUE NOT NULL,&#10;        category TEXT NOT NULL,&#10;        content TEXT NOT NULL,&#10;        photo_url TEXT,&#10;        note TEXT,&#10;        status TEXT DEFAULT 'Pending',&#10;        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,&#10;        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP&#10;    )`, (err) =&gt; {&#10;        if (err) {&#10;            console.error('Error creating table:', err);&#10;        } else {&#10;            console.log('Database schema initialized');&#10;        }&#10;    });&#10;}&#10;&#10;// Generate unique tracking code&#10;function generateTrackingCode() {&#10;    return crypto.randomBytes(4).toString('hex').toUpperCase();&#10;}&#10;&#10;// API Routes&#10;&#10;// Submit new confession&#10;app.post('/api/confessions', (req, res) =&gt; {&#10;    const { category, content, photo, note } = req.body;&#10;    &#10;    // Validation&#10;    if (!category || !content) {&#10;        return res.status(400).json({ &#10;            success: false, &#10;            message: 'Category and content are required' &#10;        });&#10;    }&#10;&#10;    const trackingCode = generateTrackingCode();&#10;    &#10;    db.run(&#10;        `INSERT INTO confessions (tracking_code, category, content, photo_url, note) &#10;         VALUES (?, ?, ?, ?, ?)`,&#10;        [trackingCode, category, content, photo || null, note || null],&#10;        function(err) {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Failed to submit confession' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                trackingCode: trackingCode,&#10;                message: 'Confession submitted successfully!',&#10;                id: this.lastID&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Track confession by code&#10;app.get('/api/confessions/:code', (req, res) =&gt; {&#10;    const { code } = req.params;&#10;    &#10;    db.get(&#10;        `SELECT id, tracking_code, category, content, status, created_at, updated_at &#10;         FROM confessions WHERE tracking_code = ?`,&#10;        [code.toUpperCase()],&#10;        (err, row) =&gt; {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Database error' &#10;                });&#10;            }&#10;            &#10;            if (!row) {&#10;                return res.status(404).json({ &#10;                    success: false, &#10;                    message: 'Confession not found' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                confession: row&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Get recent confessions (only Posted status)&#10;app.get('/api/confessions', (req, res) =&gt; {&#10;    const limit = parseInt(req.query.limit) || 10;&#10;    &#10;    db.all(&#10;        `SELECT tracking_code, category, LEFT(content, 200) as content, created_at &#10;         FROM confessions &#10;         WHERE status = 'Posted' &#10;         ORDER BY created_at DESC &#10;         LIMIT ?`,&#10;        [limit],&#10;        (err, rows) =&gt; {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Database error' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                confessions: rows&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Update confession status (admin)&#10;app.put('/api/confessions/:code/status', (req, res) =&gt; {&#10;    const { code } = req.params;&#10;    const { status } = req.body;&#10;    &#10;    if (!['Pending', 'Posted', 'Rejected'].includes(status)) {&#10;        return res.status(400).json({ &#10;            success: false, &#10;            message: 'Invalid status' &#10;        });&#10;    }&#10;    &#10;    db.run(&#10;        `UPDATE confessions &#10;         SET status = ?, updated_at = CURRENT_TIMESTAMP &#10;         WHERE tracking_code = ?`,&#10;        [status, code.toUpperCase()],&#10;        function(err) {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Failed to update status' &#10;                });&#10;            }&#10;            &#10;            if (this.changes === 0) {&#10;                return res.status(404).json({ &#10;                    success: false, &#10;                    message: 'Confession not found' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                message: 'Status updated successfully'&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Get statistics&#10;app.get('/api/stats', (req, res) =&gt; {&#10;    db.all(&#10;        `SELECT &#10;            COUNT(*) as total,&#10;            SUM(CASE WHEN status = 'Posted' THEN 1 ELSE 0 END) as posted,&#10;            SUM(CASE WHEN status = 'Pending' THEN 1 ELSE 0 END) as pending&#10;         FROM confessions`,&#10;        (err, rows) =&gt; {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Database error' &#10;                });&#10;            }&#10;            &#10;            const stats = rows[0];&#10;            res.json({&#10;                success: true,&#10;                stats: {&#10;                    total: stats.total || 0,&#10;                    posted: stats.posted || 0,&#10;                    pending: stats.pending || 0,&#10;                    acceptanceRate: stats.total &gt; 0 &#10;                        ? ((stats.posted / stats.total) * 100).toFixed(1) &#10;                        : 0&#10;                }&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Serve HTML pages&#10;app.get('/', (req, res) =&gt; {&#10;    res.sendFile(path.join(__dirname, 'public', 'index.html'));&#10;});&#10;&#10;app.get('/track', (req, res) =&gt; {&#10;    res.sendFile(path.join(__dirname, 'public', 'confession.html'));&#10;});&#10;&#10;// Start server&#10;app.listen(PORT, () =&gt; {&#10;    console.log(`Server running on http://localhost:${PORT}`);&#10;    console.log('Backend API endpoints:');&#10;    console.log('  POST   /api/confessions       - Submit confession');&#10;    console.log('  GET    /api/confessions/:code - Track confession');&#10;    console.log('  GET    /api/confessions       - Get recent confessions');&#10;    console.log('  GET    /api/stats             - Get statistics');&#10;});&#10;&#10;// Graceful shutdown&#10;process.on('SIGINT', () =&gt; {&#10;    db.close((err) =&gt; {&#10;        if (err) {&#10;            console.error('Error closing database:', err);&#10;        } else {&#10;            console.log('Database connection closed');&#10;        }&#10;        process.exit(0);&#10;    });&#10;});&#10;" />
              <option name="updatedContent" value="const express = require('express');&#10;const sqlite3 = require('sqlite3').verbose();&#10;const path = require('path');&#10;const crypto = require('crypto');&#10;const cors = require('cors');&#10;&#10;const app = express();&#10;const PORT = process.env.PORT || 3000;&#10;&#10;// Middleware&#10;app.use(cors());&#10;app.use(express.json());&#10;app.use(express.urlencoded({ extended: true }));&#10;app.use(express.static(path.join(__dirname, 'public')));&#10;&#10;// Database setup&#10;const db = new sqlite3.Database('./confessions.db', (err) =&gt; {&#10;    if (err) {&#10;        console.error('Database connection error:', err);&#10;    } else {&#10;        console.log('Connected to SQLite database');&#10;        initDatabase();&#10;    }&#10;});&#10;&#10;// Initialize database schema&#10;function initDatabase() {&#10;    db.run(`CREATE TABLE IF NOT EXISTS confessions (&#10;        id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;        tracking_code TEXT UNIQUE NOT NULL,&#10;        category TEXT NOT NULL,&#10;        content TEXT NOT NULL,&#10;        photo_url TEXT,&#10;        note TEXT,&#10;        status TEXT DEFAULT 'Pending',&#10;        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,&#10;        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP&#10;    )`, (err) =&gt; {&#10;        if (err) {&#10;            console.error('Error creating table:', err);&#10;        } else {&#10;            console.log('Database schema initialized');&#10;        }&#10;    });&#10;}&#10;&#10;// Generate unique tracking code&#10;function generateTrackingCode() {&#10;    return crypto.randomBytes(4).toString('hex').toUpperCase();&#10;}&#10;&#10;// API Routes&#10;&#10;// Submit new confession&#10;app.post('/api/confessions', (req, res) =&gt; {&#10;    const { category, content, photo, note } = req.body;&#10;    &#10;    // Validation&#10;    if (!category || !content) {&#10;        return res.status(400).json({ &#10;            success: false, &#10;            message: 'Category and content are required' &#10;        });&#10;    }&#10;&#10;    const trackingCode = generateTrackingCode();&#10;    &#10;    db.run(&#10;        `INSERT INTO confessions (tracking_code, category, content, photo_url, note) &#10;         VALUES (?, ?, ?, ?, ?)`,&#10;        [trackingCode, category, content, photo || null, note || null],&#10;        function(err) {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Failed to submit confession' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                trackingCode: trackingCode,&#10;                message: 'Confession submitted successfully!',&#10;                id: this.lastID&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Track confession by code&#10;app.get('/api/confessions/:code', (req, res) =&gt; {&#10;    const { code } = req.params;&#10;    &#10;    db.get(&#10;        `SELECT id, tracking_code, category, content, status, created_at, updated_at &#10;         FROM confessions WHERE tracking_code = ?`,&#10;        [code.toUpperCase()],&#10;        (err, row) =&gt; {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Database error' &#10;                });&#10;            }&#10;            &#10;            if (!row) {&#10;                return res.status(404).json({ &#10;                    success: false, &#10;                    message: 'Confession not found' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                confession: row&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Get recent confessions (only Approved status)&#10;app.get('/api/confessions', (req, res) =&gt; {&#10;    const limit = parseInt(req.query.limit) || 10;&#10;    &#10;    db.all(&#10;        `SELECT tracking_code, category, SUBSTR(content, 1, 200) as content, created_at &#10;         FROM confessions &#10;         WHERE status = 'Approved' &#10;         ORDER BY created_at DESC &#10;         LIMIT ?`,&#10;        [limit],&#10;        (err, rows) =&gt; {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Database error' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                confessions: rows&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Update confession status (admin)&#10;app.put('/api/confessions/:code/status', (req, res) =&gt; {&#10;    const { code } = req.params;&#10;    const { status } = req.body;&#10;    &#10;    if (!['Pending', 'Approved', 'Rejected'].includes(status)) {&#10;        return res.status(400).json({ &#10;            success: false, &#10;            message: 'Invalid status' &#10;        });&#10;    }&#10;    &#10;    db.run(&#10;        `UPDATE confessions &#10;         SET status = ?, updated_at = CURRENT_TIMESTAMP &#10;         WHERE tracking_code = ?`,&#10;        [status, code.toUpperCase()],&#10;        function(err) {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Failed to update status' &#10;                });&#10;            }&#10;            &#10;            if (this.changes === 0) {&#10;                return res.status(404).json({ &#10;                    success: false, &#10;                    message: 'Confession not found' &#10;                });&#10;            }&#10;            &#10;            res.json({&#10;                success: true,&#10;                message: 'Status updated successfully'&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Get statistics&#10;app.get('/api/stats', (req, res) =&gt; {&#10;    db.all(&#10;        `SELECT &#10;            COUNT(*) as total,&#10;            SUM(CASE WHEN status = 'Posted' THEN 1 ELSE 0 END) as posted,&#10;            SUM(CASE WHEN status = 'Pending' THEN 1 ELSE 0 END) as pending&#10;         FROM confessions`,&#10;        (err, rows) =&gt; {&#10;            if (err) {&#10;                console.error('Database error:', err);&#10;                return res.status(500).json({ &#10;                    success: false, &#10;                    message: 'Database error' &#10;                });&#10;            }&#10;            &#10;            const stats = rows[0];&#10;            res.json({&#10;                success: true,&#10;                stats: {&#10;                    total: stats.total || 0,&#10;                    posted: stats.posted || 0,&#10;                    pending: stats.pending || 0,&#10;                    acceptanceRate: stats.total &gt; 0 &#10;                        ? ((stats.posted / stats.total) * 100).toFixed(1) &#10;                        : 0&#10;                }&#10;            });&#10;        }&#10;    );&#10;});&#10;&#10;// Serve HTML pages&#10;app.get('/', (req, res) =&gt; {&#10;    res.sendFile(path.join(__dirname, 'public', 'index.html'));&#10;});&#10;&#10;app.get('/track', (req, res) =&gt; {&#10;    res.sendFile(path.join(__dirname, 'public', 'confession.html'));&#10;});&#10;&#10;// Start server&#10;app.listen(PORT, () =&gt; {&#10;    console.log(`Server running on http://localhost:${PORT}`);&#10;    console.log('Backend API endpoints:');&#10;    console.log('  POST   /api/confessions       - Submit confession');&#10;    console.log('  GET    /api/confessions/:code - Track confession');&#10;    console.log('  GET    /api/confessions       - Get recent confessions');&#10;    console.log('  GET    /api/stats             - Get statistics');&#10;});&#10;&#10;// Graceful shutdown&#10;process.on('SIGINT', () =&gt; {&#10;    db.close((err) =&gt; {&#10;        if (err) {&#10;            console.error('Error closing database:', err);&#10;        } else {&#10;            console.log('Database connection closed');&#10;        }&#10;        process.exit(0);&#10;    });&#10;});&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>